<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
	<link rel="stylesheet" href="style.css">
	<title>Weather Dashboard</title>
</head>

<body>
	<h1>Weather Dashboard</h1>
	<div class="col-4" id="nav">
		<h6>Search for a City:</h6>
		<div class="input-group mb-3">
			<input id="input-city" type="text" class="form-control" aria-label="Search City"
				aria-describedby="button-addon2">
			<div class="input-group-append">
				<button id="search-city" type="button" class="btn btn-primary"><i class="fas fa-search"></i></button>
			</div>
		</div>
		<div>
			<nav>
				<ul class="list-cities">
					<li class="location">Cras justo odio</li>
				</ul>
			</nav>
		</div>
	</div>
	<div id="info">
		<div id="forecastNow">
			Forecast goes here
		</div>
		<div id="forecast5Day">
			<h4>5-Day Forecast:</h4>
			<div class="card" style="width: 18rem;">
				<div class="card-body">
					<h5 class="card-title">Card title</h5>
					<h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
					<p class="card-text">Some quick example text to build on the card title and make up the bulk of the
						card's content.</p>
					<a href="#" class="card-link">Card link</a>
					<a href="#" class="card-link">Another link</a>
				</div>
			</div>
		</div>
	</div>


	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		// Array of weather locations
		var weatherLocations = ["Austin", "Chicago", "New York", "Orlando", "San Francisco", "Seattle", "Denver", "Atlanta"];


		function displayWeather(location) {
			// API Key for OpenWeather API
			var queryURL = "api.openweathermap.org/data/2.5/forecast?q=" + location + "&appid=a1c038ee051fba2c57aa5df3e76e9156";

			console.log(queryURL);

			// Create AJAX call
			$.ajax({
				url: queryURL,
				method: "GET",
			}).then(function(response){
				console.log(response);

			// Creating element to hold forecast
			var forecast = $("<div class='forecast'>");

			// Create, Display and Retrieve Temperature
			var temperature = response.list[0].main.temp;
			var info1 = $("<p>").text("Temperature: " + temperature + "Â°F");

			// Append Forecast Info
			$("#forecastNow").append(temp);
			});
		}

		// Function for displaying movie data
		function renderButtons() {

			// Deleting the movies prior to adding new movies
			// (this is necessary otherwise you will have repeat buttons)
			$(".list-cities").empty();

			// Looping through the array of movies
			for (var i = 0; i < weatherLocations.length; i++) {

				// Then dynamicaly generating buttons for each movie in the array
				// This code $("<button>") is all jQuery needs to create the beginning and end tag. (<button></button>)
				var a = $("<li>");
				// Adding a class of movie-btn to our button
				a.addClass("location");
				// Adding a data-attribute
				a.attr("data-name", weatherLocations[i]);
				// Providing the initial button text
				a.text(weatherLocations[i]);
				// Adding the button to the buttons-view div
				$(".list-cities").append(a);
			}
		}



		// Event handler to get city name
		$("#search-city").on("click", function (event) {
			event.preventDefault();

			// Store name of city
			var city = $("#input-city").val().trim();
			console.log(city);

			// City pushed to array
			weatherLocations.push(city);

			// Run displayWeather function(passing city as argement)
			displayWeather(city);

			renderButtons(city);
		});

     	// Adding click event listeners to all elements with a class of "movie"
     	$(document).on("click", ".movie", displayWeather);

		renderButtons();

	</script>


</body>

</html>